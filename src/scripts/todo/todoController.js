class TodoController {
    constructor() {
        console.log('‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–æ–∑–¥–∞–Ω');
        // –≠—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    // –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞

    this.todoForm = null;
    this.todoInput = null;
    this.addButton = null;
    }

    init() {
        // –ú–µ—Ç–æ–¥ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–∑–∞–ø—É—Å–∫–∞) –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
        console.log('‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è');
        // –ó–¥–µ—Å—å –±—É–¥–µ–º –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        // –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç—ã —Å—Ä–∞–∑—É
        this.findElements();
        // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ - –∂–¥—ë–º –∏ –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞ —á–µ—Ä–µ–∑ 100–º—Å
        if (!this.todoForm) {
            console.log('‚è≥ –ü–æ–¥–æ–∂–¥–∏—Ç–µ, –∏—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã...');
            this.waitForComponents();
        } else {
            this.setupEventListeners();
        }
    }

    waitForComponents() {
        const checkInterval = setInterval(() => {
            console.log('üîç –ü—Ä–æ–≤–µ—Ä—è—é –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤...');
            this.findElements();

            if (this.todoForm) {
                console.log('üéâ –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–π–¥–µ–Ω—ã!');
                clearInterval(checkInterval);// –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É
                this.setupEventListeners();// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            }
        }, 100);
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    findElements() {
       console.log('üîç –ò—â—É —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ...');
       // –ù–∞—Ö–æ–¥–∏–º —Ñ–æ—Ä–º—É –ø–æ –∫–ª–∞—Å—Å—É
       this.todoForm = document.querySelector('.todo-input__form');
       // –ù–∞—Ö–æ–¥–∏–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø–æ –∫–ª–∞—Å—Å—É
       this.todoInput = document.querySelector('.todo-input__field');
       // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –ø–æ –∫–ª–∞—Å—Å—É
       this.addButton = document.querySelector('.todo-input__button');

       if (this.todoForm) {
        console.log('‚úÖ –§–æ—Ä–º–∞ –Ω–∞–π–¥–µ–Ω–∞:', this.todoForm);
       }
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
    setupEventListeners() {
        console.log('üéß –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π...');

        if (!this.todoForm || !this.todoInput || !this.addButton) {
            console.error('‚ùå –ù–µ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–π–¥–µ–Ω—ã!');
            return;
        }
        console.log('‚úÖ –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ');
    }
}

const todoController = new TodoController(); // –°–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä (–æ–±—ä–µ–∫—Ç) –Ω–∞—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

export { todoController }; // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –µ–≥–æ, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö
