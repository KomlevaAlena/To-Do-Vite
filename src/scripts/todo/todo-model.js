// Модель данных для Todo листа
class TodoModel {
  constructor() {// Конструктор класса - выполняется при создании нового объекта
    this.todos = []; // Массив задач Создаем пустой массив для хранения задач
    this.nextId = 1; // Счётчик для ID Уникальный идентификатор для каждой новой задачи Каждая задача получит id: 1, 2, 3, ...
  }

  // Добавить задачу
  addTodo(text) { // Проверяем, что текст не пустой
    if (!text || text.trim() === '') {
      return null; // Пустые задачи не добавляем
    }

    const todo = { // Создаем объект задачи
      id: this.nextId++,// Присваиваем id и увеличиваем счетчик
      text: text.trim(), // Убираем лишние пробелы
      completed: false // По умолчанию задача не выполнена
    };

    this.todos.push(todo);// Добавляем задачу в массив
    return todo;// Возвращаем созданную задачу
  }

  // Удалить задачу по ID Метод для удаления задачи по ID
  removeTodo(id) {
    const index = this.todos.findIndex(todo => todo.id === id); // Находим индекс задачи в массиве findIndex проходит по всем задачам и ищет ту, у которой id совпада
    if (index !== -1) { // Если задача найдена (индекс не -1)
      this.todos.splice(index, 1); // Удаляем задачу из массива splice удаляет элемент по индексу
      return true; // Успешно удалил
    }
    return false; // Задача не найдена
  }

  // Получить все задачи Метод для получения всех задач
  getAllTodos() {
    return [...this.todos]; // Возвращаем копию  Spread оператор создает новый массив
  }

  // Проверить, есть ли задачи
  hasTodos() {
    return this.todos.length > 0; // Возвращает true если массив не пустой, false если пустой
  }
}

// Экспортируем экземпляр модели (синглтон) Создаем один экземпляр (объект) модели "синглтон" - только один экземпляр на всё приложение
export const todoModel = new TodoModel();
