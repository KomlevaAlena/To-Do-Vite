// –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Todo –ª–∏—Å—Ç–∞
class TodoModel {
  constructor() {// –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—Å–∞ - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
    this.todos = []; // –ú–∞—Å—Å–∏–≤ –∑–∞–¥–∞—á –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
    this.nextId = 1; // –°—á—ë—Ç—á–∏–∫ –¥–ª—è ID –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∏—Ç id: 1, 2, 3, ...
  }

  // –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
  addTodo(text) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–µ–∫—Å—Ç –Ω–µ –ø—É—Å—Ç–æ–π
    if (!text || text.trim() === '') {
      return null; // –ü—É—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º
    }

    const todo = { // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∑–∞–¥–∞—á–∏
      id: this.nextId++,// –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º id –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
      text: text.trim(), // –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
      completed: false // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–¥–∞—á–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
    };

    this.todos.push(todo);// –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á—É –≤ –º–∞—Å—Å–∏–≤
    return todo;// –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–∑–¥–∞–Ω–Ω—É—é –∑–∞–¥–∞—á—É
  }

  // –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ ID –ú–µ—Ç–æ–¥ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –ø–æ ID
  removeTodo(id) {
    const index = this.todos.findIndex(todo => todo.id === id); // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –∑–∞–¥–∞—á–∏ –≤ –º–∞—Å—Å–∏–≤–µ findIndex –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –∑–∞–¥–∞—á–∞–º –∏ –∏—â–µ—Ç —Ç—É, —É –∫–æ—Ç–æ—Ä–æ–π id —Å–æ–≤–ø–∞–¥–∞
    if (index !== -1) { // –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–∞–π–¥–µ–Ω–∞ (–∏–Ω–¥–µ–∫—Å –Ω–µ -1)
      this.todos.splice(index, 1); // –£–¥–∞–ª—è–µ–º –∑–∞–¥–∞—á—É –∏–∑ –º–∞—Å—Å–∏–≤–∞ splice —É–¥–∞–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –ø–æ –∏–Ω–¥–µ–∫—Å—É
      return true; // –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–∏–ª
    }
    return false; // –ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
  }

  // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
  getAllTodos() {
    return [...this.todos]; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–ø–∏—é  Spread –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤
  }

  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –∑–∞–¥–∞—á–∏
  hasTodos() {
    return this.todos.length > 0; // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤ –Ω–µ –ø—É—Å—Ç–æ–π, false –µ—Å–ª–∏ –ø—É—Å—Ç–æ–π
  }

  getTotalCount() { // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ—Ö –∑–∞–¥–∞—á
    return this.todos.length;
  }
  // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
  getCompletedCount() {
    // filter —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ —Å –∑–∞–¥–∞—á–∞–º–∏, –≥–¥–µ completed === true
    // length –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    return this.todos.filter(todo => todo.completed).length;
  }
  // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö (–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö) –∑–∞–¥–∞—á
  getActiveCount() {
    // filter —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ —Å –∑–∞–¥–∞—á–∞–º–∏, –≥–¥–µ completed === false
    return this.todos.filter(todo => !todo.completed).length;
  }
  // –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Å—á—ë—Ç—á–∏–∫–æ–≤ —Å—Ä–∞–∑—É
  getCounters() {
    return {
      total: this.getTotalCount(),
      completed: this.getCompletedCount(),
      active: this.getActiveCount()
    };
  }
  // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
  toggleTodo(id) {
    console.log('üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∞—é —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ —Å id:', id);
    // –ù–∞—Ö–æ–¥–∏–º –∑–∞–¥–∞—á—É –ø–æ id
    const todo = this.todos.find(todo => todo.id === id);

    if (todo) {
      // –ú–µ–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–π
    // –ï—Å–ª–∏ –±—ã–ª–æ true ‚Üí —Å—Ç–∞–Ω–µ—Ç false, –µ—Å–ª–∏ –±—ã–ª–æ false ‚Üí —Å—Ç–∞–Ω–µ—Ç true
    todo.completed = !todo.completed;
    console.log('‚úÖ –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω—ë–Ω:', todo.completed);
    return true;
    }
    console.log('‚ùå –ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
    return false;
  }
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –º–æ–¥–µ–ª–∏ (—Å–∏–Ω–≥–ª—Ç–æ–Ω) –°–æ–∑–¥–∞–µ–º –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä (–æ–±—ä–µ–∫—Ç) –º–æ–¥–µ–ª–∏ "—Å–∏–Ω–≥–ª—Ç–æ–Ω" - —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
export const todoModel = new TodoModel();
